---
import { languages, defaultLang } from '../i18n/ui';
import type { Lang } from '../i18n/utils';

interface Props {
  currentLang: Lang;
}

const { currentLang } = Astro.props;
const base = import.meta.env.BASE_URL || '/';
---

<div class="dropdown dropdown-end">
  <div tabindex="0" role="button" class="btn btn-ghost btn-sm gap-1">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
    </svg>
    {languages[currentLang]}
    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </div>
  <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-50 w-32 p-2 shadow-lg border border-base-300">
    {Object.entries(languages).map(([lang, label]) => (
      <li>
        <a
          href={lang === defaultLang ? base : `${base}${lang}/`}
          class:list={[{ 'bg-primary/10 text-primary': lang === currentLang }]}
        >
          {label}
        </a>
      </li>
    ))}
  </ul>
</div>

---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import LanguageSwitcher from './LanguageSwitcher.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<nav class="navbar bg-base-100/80 backdrop-blur-md sticky top-0 z-40 border-b border-base-200">
  <div class="container mx-auto px-4">
    <!-- Logo -->
    <div class="flex-1">
      <a href={import.meta.env.BASE_URL || '/'} class="btn btn-ghost text-xl font-bold gap-2">
        <svg class="w-8 h-8" viewBox="0 0 32 32" fill="none">
          <defs>
            <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color: oklch(55% 0.25 280)" />
              <stop offset="100%" style="stop-color: oklch(65% 0.2 320)" />
            </linearGradient>
          </defs>
          <circle cx="16" cy="16" r="14" fill="url(#logo-gradient)" />
          <path d="M16 8c-2.2 0-4 1.8-4 4v4c0 2.2 1.8 4 4 4s4-1.8 4-4v-4c0-2.2-1.8-4-4-4z" fill="white" />
          <path d="M22 16v1c0 3.3-2.7 6-6 6s-6-2.7-6-6v-1h-2v1c0 4 3 7.4 7 7.9V27h-2v2h6v-2h-2v-2.1c4-.5 7-3.9 7-7.9v-1h-2z" fill="white" />
        </svg>
        <span class="text-gradient">oto</span>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center gap-1">
      <a href="#features" class="btn btn-ghost btn-sm">{t('nav.features')}</a>
      <a href="#pricing" class="btn btn-ghost btn-sm">{t('nav.pricing')}</a>
      <a href="#howto" class="btn btn-ghost btn-sm">{t('nav.howto')}</a>
      <a href="#faq" class="btn btn-ghost btn-sm">{t('nav.faq')}</a>
      <div class="divider divider-horizontal mx-1"></div>
      <LanguageSwitcher currentLang={lang} />
      <a
        href="https://github.com/ikumasudo/oto/releases/latest"
        class="btn btn-primary btn-sm ml-2"
      >
        {t('nav.download')}
      </a>
    </div>

    <!-- Mobile Menu -->
    <div class="flex md:hidden items-center gap-2">
      <LanguageSwitcher currentLang={lang} />
      <div class="dropdown dropdown-end">
        <div tabindex="0" role="button" class="btn btn-ghost btn-sm">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </div>
        <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-50 w-52 p-2 shadow-lg border border-base-300">
          <li><a href="#features">{t('nav.features')}</a></li>
          <li><a href="#pricing">{t('nav.pricing')}</a></li>
          <li><a href="#howto">{t('nav.howto')}</a></li>
          <li><a href="#faq">{t('nav.faq')}</a></li>
          <li class="mt-2">
            <a href="https://github.com/ikumasudo/oto/releases/latest" class="btn btn-primary btn-sm">
              {t('nav.download')}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
